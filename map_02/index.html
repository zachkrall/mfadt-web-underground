<!DOCTYPE html>
<html>
<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1,shrink-to-fit=no">

    <title>Flow</title>

<style type="text/css">
body{
  background:#000;
  background-image:url('background.png');
  background-repeat:no-repeat;
  background-size:contain;

  max-width: 100vh * 16 / 9;
}
</style>
</head>
<body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.9.0/p5.min.js" integrity="sha256-WVsM3xrcqyuFNF3W1qtIKbHFsD0977nDQA8DCMp1zCw=" crossorigin="anonymous"></script>
<script type="text/javascript">
const m = 100, step = 30;
let time = 0, amp = 30;

function setup() {
  createCanvas(window.innerWidth, window.innerHeight);
}

function draw() {

  clear();

  let minW = 0-m;
  let maxW = width+m;

  let minH = 0-m;
  let maxH = height+m;

  // background(20,20,20);
  // background(255);

  for (let i=minW; i<maxW; i+=step){
    for (let j=minH; j<maxH; j+=step){

      let x = i, y = j;

      stroke(
        map(x, minW, maxW, 0, 255),
        map(y, minH, maxH, 0, 255),
        255
      );
      stroke(244);
      strokeWeight(1);

      noFill();

      let nX = x/width;
      let nY = y/height;
      let size = 12;

      let rotation = (
                   sin( (nX * -5) + time ) +
                   sin( (nY * 5) + time ) +
                   cos( (nX * -10) + HALF_PI ) +
                   sin( (nY * 5) + PI ) +
                   sin( (nX * 8) + PI )
                 ) * amp;

      size = abs(size);

      push();
      translate(x,y)
      rotate(rotation * 0.05);
      line( 0, 0, size, size);
      pop();

    }
  }

  time+=0.1;

}
</script>
</body>
</html>
